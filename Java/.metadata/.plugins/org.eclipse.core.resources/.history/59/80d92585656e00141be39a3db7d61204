import java.net.*;
import java.io.*;

public class ChatServer {
	@SuppressWarnings("null")
	public static void main(String[] args)
	{
		ServerSocket server = null;
		Socket client = null;
		try {
			server = new ServerSocket(1207);
		} catch (IOException e) {
			System.out.println("Error: Can't listen to port " + server.getLocalPort());
			e.printStackTrace();
		}

		try {
			client = server.accept();
			System.out.println("LinkStart!");
			
			BufferedReader clientin = new BufferedReader(new InputStreamReader(client.getInputStream()));
			PrintWriter serverout = new  PrintWriter(client.getOutputStream());
			BufferedReader standin = new BufferedReader(new InputStreamReader(System.in));
			String s = null;
			
			do {
				System.out.println("Client: " + clientin.readLine());
				System.out.println("Server: ");
				s = standin.readLine();
				serverout.println(s);
				serverout.flush();
			} while(!s.equals("q"))
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
